"use strict";(self["webpackChunkele_admin_template"]=self["webpackChunkele_admin_template"]||[]).push([[3939,8758],{93939:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var o=function(){var e=this,t=e._self._c;return t("div",[t("ele-pro-table",{ref:"table",attrs:{columns:e.columns,datasource:e.datasource,height:"calc(100vh - 265px)","full-height":"calc(100vh - 116px)","tool-class":"ele-toolbar-form","cache-key":"systemOrgUserTable"},scopedSlots:e._u([{key:"toolbar",fn:function(){return[t("org-user-search",{on:{search:e.reload}},[t("el-button",{staticClass:"ele-btn-icon",attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openEdit()}}},[e._v(" 添加 ")])],1)]},proxy:!0},{key:"roles",fn:function({row:s}){return e._l(s.roles,(function(s){return t("el-tag",{key:s.roleId,attrs:{type:"primary",size:"mini","disable-transitions":!0}},[e._v(" "+e._s(s.roleName)+" ")])}))}},{key:"status",fn:function({row:s}){return[t("el-switch",{attrs:{"active-value":0,"inactive-value":1},on:{change:function(t){return e.editStatus(s)}},model:{value:s.status,callback:function(t){e.$set(s,"status",t)},expression:"row.status"}})]}},{key:"action",fn:function({row:s}){return[t("el-link",{attrs:{type:"primary",underline:!1,icon:"el-icon-edit"},on:{click:function(t){return e.openEdit(s)}}},[e._v(" 修改 ")]),t("el-popconfirm",{staticClass:"ele-action",attrs:{title:"确定要删除此用户吗？"},on:{confirm:function(t){return e.remove(s)}},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-link",{attrs:{type:"danger",underline:!1,icon:"el-icon-delete"}},[e._v(" 删除 ")])]},proxy:!0}],null,!0)})]}}])}),t("org-user-edit",{attrs:{data:e.current,visible:e.showEdit,"organization-list":e.organizationList,"organization-id":e.organizationId},on:{"update:visible":function(t){e.showEdit=t},done:e.reload}})],1)},r=[],l=s(18758),n=s(46272),a=s(59477),i={components:{OrgUserSearch:l["default"],OrgUserEdit:n["default"]},props:{organizationId:Number,organizationList:Array},data(){return{columns:[{columnKey:"index",type:"index",width:45,align:"center",showOverflowTooltip:!0,fixed:"left"},{prop:"username",label:"用户账号",sortable:"custom",showOverflowTooltip:!0,minWidth:110},{prop:"nickname",label:"用户名",sortable:"custom",showOverflowTooltip:!0,minWidth:110},{prop:"sexName",label:"性别",sortable:"custom",showOverflowTooltip:!0,minWidth:80},{prop:"phone",label:"手机号",sortable:"custom",showOverflowTooltip:!0,minWidth:110},{columnKey:"roles",label:"角色",showOverflowTooltip:!0,minWidth:110,slot:"roles"},{prop:"createTime",label:"创建时间",sortable:"custom",showOverflowTooltip:!0,minWidth:110,formatter:(e,t,s)=>this.$util.toDateString(s)},{prop:"status",label:"状态",align:"center",sortable:"custom",width:80,resizable:!1,slot:"status"},{columnKey:"action",label:"操作",width:130,align:"center",resizable:!1,slot:"action",showOverflowTooltip:!0}],current:null,showEdit:!1}},methods:{datasource({page:e,limit:t,where:s,order:o}){return(0,a.I0)({...s,...o,page:e,limit:t,organizationId:this.organizationId})},reload(e){this.$refs.table.reload({page:1,where:e})},openEdit(e){this.current=e,this.showEdit=!0},remove(e){const t=this.$loading({lock:!0});(0,a.kX)(e.userId).then((e=>{t.close(),this.$message.success(e),this.reload()})).catch((e=>{t.close(),this.$message.error(e.message)}))},editStatus(e){const t=this.$loading({lock:!0});(0,a.OL)(e.userId,e.status).then((e=>{t.close(),this.$message.success(e)})).catch((s=>{t.close(),e.status=e.status?0:1,this.$message.error(s.message)}))}},watch:{organizationId(){this.reload()}}},c=i,u=s(1001),h=(0,u.Z)(c,o,r,!1,null,null,null),m=h.exports},18758:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var o=function(){var e=this,t=e._self._c;return t("el-form",{staticClass:"ele-form-search",attrs:{size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)},submit:function(e){e.preventDefault()}}},[t("el-row",{attrs:{gutter:10}},[t("el-col",e._b({},"el-col",e.styleResponsive?{md:8}:{span:8},!1),[t("el-form-item",[t("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入用户账号"},model:{value:e.where.username,callback:function(t){e.$set(e.where,"username",t)},expression:"where.username"}})],1)],1),t("el-col",e._b({},"el-col",e.styleResponsive?{md:8}:{span:8},!1),[t("el-form-item",[t("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入用户名"},model:{value:e.where.nickname,callback:function(t){e.$set(e.where,"nickname",t)},expression:"where.nickname"}})],1)],1),t("el-col",e._b({},"el-col",e.styleResponsive?{md:8}:{span:8},!1),[t("el-form-item",[t("el-button",{staticClass:"ele-btn-icon",attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v(" 查询 ")]),e._t("default")],2)],1)],1)],1)},r=[],l={data(){const e={username:"",nickname:""};return{where:{...e}}},computed:{styleResponsive(){return this.$store.state.theme.styleResponsive}},methods:{search(){this.$emit("search",this.where)},reset(){this.where={...this.defaultWhere},this.search()}}},n=l,a=s(1001),i=(0,a.Z)(n,o,r,!1,null,null,null),c=i.exports}}]);