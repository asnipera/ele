"use strict";(self["webpackChunkele_admin_template"]=self["webpackChunkele_admin_template"]||[]).push([[6907],{36907:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var a=function(){var e=this,t=e._self._c;return t("div",{class:["login-wrapper",["","login-form-right","login-form-left"][e.direction]]},[t("el-form",{ref:"form",staticClass:"login-form ele-bg-white",attrs:{size:"large",model:e.form,rules:e.rules},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}}},[t("h4",[e._v(e._s(e.$t("login.title")))]),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-user",placeholder:e.$t("login.username")},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{"show-password":"","prefix-icon":"el-icon-lock",placeholder:e.$t("login.password")},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",{attrs:{prop:"code"}},[t("div",{staticClass:"login-input-group"},[t("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-_vercode",placeholder:e.$t("login.code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}}),e.captcha?t("img",{staticClass:"login-captcha",attrs:{alt:"",src:e.captcha},on:{click:e.changeCaptcha}}):e._e()],1)]),t("div",{staticClass:"el-form-item"},[t("el-checkbox",{model:{value:e.form.remember,callback:function(t){e.$set(e.form,"remember",t)},expression:"form.remember"}},[e._v(" "+e._s(e.$t("login.remember"))+" ")]),t("el-link",{staticClass:"ele-pull-right",attrs:{type:"primary",underline:!1},on:{click:function(t){return e.$router.push("/forget")}}},[e._v(" 忘记密码 ")])],1),t("div",{staticClass:"el-form-item"},[t("el-button",{staticClass:"login-btn",attrs:{size:"large",type:"primary",loading:e.loading},on:{click:e.submit}},[e._v(" "+e._s(e.loading?e.$t("login.loading"):e.$t("login.login"))+" ")])],1),t("div",{staticClass:"ele-text-center",staticStyle:{"margin-bottom":"10px"}},[t("i",{staticClass:"login-oauth-icon el-icon-_qq",staticStyle:{background:"#3492ed"}}),t("i",{staticClass:"login-oauth-icon el-icon-_wechat",staticStyle:{background:"#4daf29"}}),t("i",{staticClass:"login-oauth-icon el-icon-_weibo",staticStyle:{background:"#cf1900"}})])],1),t("div",{staticClass:"login-copyright"},[e._v(" copyright © 2022 eleadmin.com all rights reserved. ")]),t("div",{staticStyle:{position:"absolute",right:"30px",top:"20px"}},[t("i18n-icon",{attrs:{"icon-style":{fontSize:"22px",color:"#fff",cursor:"pointer"}}})],1),t("div",{staticClass:"hidden-xs-only",staticStyle:{position:"absolute",right:"30px",bottom:"20px","z-index":"9"}},[t("el-radio-group",{attrs:{size:"mini"},model:{value:e.direction,callback:function(t){e.direction=t},expression:"direction"}},[t("el-radio-button",{attrs:{label:"2"}},[e._v("居左")]),t("el-radio-button",{attrs:{label:"0"}},[e._v("居中")]),t("el-radio-button",{attrs:{label:"1"}},[e._v("居右")])],1)],1)],1)},o=[],n=r(47859),i=r(73566),s=r(50124),l=r(48534),c=(r(41539),r(21703),r(84471));function u(e){return m.apply(this,arguments)}function m(){return m=(0,l.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tenantId=1,e.next=3,c.Z.post("/login",t);case 3:if(r=e.sent,0!==r.data.code){e.next=7;break}return(0,i.o4)(r.data.data.access_token,t.remember),e.abrupt("return",r.data.message);case 7:return e.abrupt("return",Promise.reject(new Error(r.data.message)));case 8:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function d(){return p.apply(this,arguments)}function p(){return p=(0,l.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("/captcha");case 2:if(t=e.sent,0!==t.data.code){e.next=5;break}return e.abrupt("return",t.data.data);case 5:return e.abrupt("return",Promise.reject(new Error(t.data.message)));case 6:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}var f={name:"Login",components:{I18nIcon:n.Z},data:function(){return{direction:0,loading:!1,form:{username:"admin",password:"admin",remember:!0,code:""},captcha:"",text:""}},computed:{rules:function(){return{username:[{required:!0,message:this.$t("login.username"),type:"string",trigger:"blur"}],password:[{required:!0,message:this.$t("login.password"),type:"string",trigger:"blur"}]}}},created:function(){(0,i.LP)()?this.goHome():this.changeCaptcha()},methods:{submit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.form.code.toLowerCase()===e.text?(e.loading=!0,u(e.form).then((function(t){e.loading=!1,e.$message.success(t),e.goHome()})).catch((function(t){e.loading=!1,e.$message.error(t.message)}))):e.$message.error("验证码错误")}))},goHome:function(){var e,t,r;this.$router.push(null!==(e=null===(t=this.$route)||void 0===t||null===(r=t.query)||void 0===r?void 0:r.from)&&void 0!==e?e:"/").catch((function(){}))},changeCaptcha:function(){var e=this;d().then((function(t){var r,a;e.captcha=t.base64,e.text=t.text,e.form.code=e.text,null===(r=e.$refs)||void 0===r||null===(a=r.form)||void 0===a||a.clearValidate()})).catch((function(t){e.$message.error(t.message)}))}}},g=f,h=r(1001),b=(0,h.Z)(g,a,o,!1,null,"5ae70540",null),v=b.exports}}]);