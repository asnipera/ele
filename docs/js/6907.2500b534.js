"use strict";(self["webpackChunkele_admin_template"]=self["webpackChunkele_admin_template"]||[]).push([[6907],{36907:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var r=function(){var e=this,t=e._self._c;return t("div",{class:["login-wrapper",["","login-form-right","login-form-left"][e.direction]]},[t("el-form",{ref:"form",staticClass:"login-form ele-bg-white",attrs:{size:"large",model:e.form,rules:e.rules},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}}},[t("h4",[e._v(e._s(e.$t("login.title")))]),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-user",placeholder:e.$t("login.username")},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{"show-password":"","prefix-icon":"el-icon-lock",placeholder:e.$t("login.password")},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",{attrs:{prop:"code"}},[t("div",{staticClass:"login-input-group"},[t("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-_vercode",placeholder:e.$t("login.code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}}),e.captcha?t("img",{staticClass:"login-captcha",attrs:{alt:"",src:e.captcha},on:{click:e.changeCaptcha}}):e._e()],1)]),t("div",{staticClass:"el-form-item"},[t("el-checkbox",{model:{value:e.form.remember,callback:function(t){e.$set(e.form,"remember",t)},expression:"form.remember"}},[e._v(" "+e._s(e.$t("login.remember"))+" ")]),t("el-link",{staticClass:"ele-pull-right",attrs:{type:"primary",underline:!1},on:{click:function(t){return e.$router.push("/forget")}}},[e._v(" 忘记密码 ")])],1),t("div",{staticClass:"el-form-item"},[t("el-button",{staticClass:"login-btn",attrs:{size:"large",type:"primary",loading:e.loading},on:{click:e.submit}},[e._v(" "+e._s(e.loading?e.$t("login.loading"):e.$t("login.login"))+" ")])],1),t("div",{staticClass:"ele-text-center",staticStyle:{"margin-bottom":"10px"}},[t("i",{staticClass:"login-oauth-icon el-icon-_qq",staticStyle:{background:"#3492ed"}}),t("i",{staticClass:"login-oauth-icon el-icon-_wechat",staticStyle:{background:"#4daf29"}}),t("i",{staticClass:"login-oauth-icon el-icon-_weibo",staticStyle:{background:"#cf1900"}})])],1),t("div",{staticClass:"login-copyright"},[e._v(" copyright © 2022 eleadmin.com all rights reserved. ")]),t("div",{staticStyle:{position:"absolute",right:"30px",top:"20px"}},[t("i18n-icon",{attrs:{"icon-style":{fontSize:"22px",color:"#fff",cursor:"pointer"}}})],1),t("div",{staticClass:"hidden-xs-only",staticStyle:{position:"absolute",right:"30px",bottom:"20px","z-index":"9"}},[t("el-radio-group",{attrs:{size:"mini"},model:{value:e.direction,callback:function(t){e.direction=t},expression:"direction"}},[t("el-radio-button",{attrs:{label:"2"}},[e._v("居左")]),t("el-radio-button",{attrs:{label:"0"}},[e._v("居中")]),t("el-radio-button",{attrs:{label:"1"}},[e._v("居右")])],1)],1)],1)},o=[],s=a(47859),i=a(73566),n=(a(21703),a(84471));async function l(e){e.tenantId=1;const t=await n.Z.post("/login",e);return 0===t.data.code?((0,i.o4)(t.data.data.access_token,e.remember),t.data.message):Promise.reject(new Error(t.data.message))}async function c(){const e=await n.Z.get("/captcha");return 0===e.data.code?e.data.data:Promise.reject(new Error(e.data.message))}var m={name:"Login",components:{I18nIcon:s.Z},data(){return{direction:0,loading:!1,form:{username:"admin",password:"admin",remember:!0,code:""},captcha:"",text:""}},computed:{rules(){return{username:[{required:!0,message:this.$t("login.username"),type:"string",trigger:"blur"}],password:[{required:!0,message:this.$t("login.password"),type:"string",trigger:"blur"}]}}},created(){(0,i.LP)()?this.goHome():this.changeCaptcha()},methods:{submit(){this.$refs.form.validate((e=>{if(!e)return!1;this.form.code.toLowerCase()===this.text?(this.loading=!0,l(this.form).then((e=>{this.loading=!1,this.$message.success(e),this.goHome()})).catch((e=>{this.loading=!1,this.$message.error(e.message)}))):this.$message.error("验证码错误")}))},goHome(){this.$router.push(this.$route?.query?.from??"/").catch((()=>{}))},changeCaptcha(){c().then((e=>{this.captcha=e.base64,this.text=e.text,this.form.code=this.text,this.$refs?.form?.clearValidate()})).catch((e=>{this.$message.error(e.message)}))}}},d=m,u=a(1001),p=(0,u.Z)(d,r,o,!1,null,"5ae70540",null),g=p.exports}}]);